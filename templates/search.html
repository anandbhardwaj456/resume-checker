{% extends 'base.html' %}
{% block content %}
<div class="grid md:grid-cols-2 gap-6 mt-4">
  <div class="bg-white p-6 rounded-lg shadow">
    <h2 class="text-lg font-semibold">Upload & Search</h2>
    <form class="mt-4 space-y-3" method="post" enctype="multipart/form-data">
      <input name="document" type="file" accept=".txt,.pdf,.docx" class="block w-full text-sm" />
      <input name="query" type="text" value="{{ query }}" placeholder="Search query" class="w-full border rounded p-2 text-sm" />
      <button class="px-4 py-2 bg-blue-600 text-white rounded hover:bg-blue-700">Search</button>
    </form>
    <div class="text-xs text-gray-500 mt-3">Indexed documents: {{ indexed_docs_count }}</div>
  </div>
  <div class="bg-white p-6 rounded-lg shadow">
    <h3 class="font-semibold">Results</h3>
    <ul class="divide-y mt-2">
      {% for path, score, snippet in results %}
        <li class="py-3">
          <div class="text-sm font-medium">{{ path }}</div>
          <div class="text-xs text-gray-500">Score: {{ '%.3f'|format(score) }}</div>
          <div class="text-xs text-gray-600 mt-1">{{ snippet }}</div>
        </li>
      {% else %}
        <li class="py-3 text-sm text-gray-500">No results.</li>
      {% endfor %}
    </ul>
  </div>
</div>
{% endblock %}


